---
title: 对象式
date: 2024-05-10 11:22:53
permalink: /pages/479f61/
categories:
  - 《Vue2》笔记
  - 自定义指令
tags:
  - 
author: 
  name: Regulus
  link: https://github.com/linxi0551
---
# 对象式
以下是自定义指令 "对象式" 写法示例：
```vue
<template>
  <div id="app">
    <h2>数据绑定并获取焦点</h2>
    <input type="text" v-focus-fbind="n" />
    <button @click="n++">点我+1</button>
  </div>
</template>

<script>
export default {
  data() {
    return {
      n: 1,
    };
  },
  directives: {
     //当需要多个单词命名的时候，就不能用简写形式，必须用字符串
    'focus-fbind': {
      //当指令绑定到元素上时调用
      bind(element, binding) {
        element.value = binding.value;
      },
      //当指令所在元素被插入到页面时调用
      inserted(element, binding) {
        element.value = binding.value;
        element.focus();
      },
      //当指令所在模板被更新时调用
      update(element, binding) {
        element.value = binding.value;
      }
    },
  },
};
</script>
```
结果展示：

![](https://cdn.nlark.com/yuque/0/2024/gif/40965929/1715249156383-9ef12bef-fd32-410c-ad09-e39caa506fcc.gif#averageHue=%23e8eaf4&clientId=u7cb7d1e0-c595-4&from=paste&id=u506bb351&originHeight=122&originWidth=272&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=stroke&taskId=u3f38dbad-3e9d-410f-9e0b-52eaf8f2d8b&title=)

总结：

- "数据绑定并获取焦点"使用函数式写法是无法实现数据绑定和监听数据变化，所以上述例子中需要用到对象式写法，使用对象式写法定义了  inserted   生命周期钩子函数，当指令所在元素被插入到 DOM 中时，该指令会自动将焦点设置到该元素上。
- 当自定义指令涉及到多个单词，命名规则要使用  kebab-case   命名方式，不要用  camelCase  命名。
- 对象式写法是一种更灵活的方式来定义自定义指令，它包含了多个属性和方法，可以定义指令的各种行为和逻辑。对象式写法通常包含   bind  、 inserted  、 update  和  unbind  等生命周期钩子函数。