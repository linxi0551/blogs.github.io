---
title: 函数式
date: 2024-05-10 11:21:11
permalink: /pages/ca80b2/
categories:
  - 《Vue2》笔记
  - 自定义指令
tags:
  - 
author: 
  name: Regulus
  link: https://github.com/linxi0551
---

# 函数式
以下是自定义指令 "函数式" 写法示例：
```vue
<template>
     <div id="app" >
        <h2>当前的值是:<span v-text="n"></span></h2>
        <!-- 自定义指令定义的时候不加 v-，但使用的时候需要加 v- -->
        <h2 >放大10倍后的值是:<span v-big="n"></span></h2>
        <button @click="n++" >点我+1</button>
    </div>
</template>

<script>
export default {
  data() {
    return {
      n: 1
    }
  },
  directives:{
      // element 代表被指令操作的DOM元素、binding代表绑定的属性值
      big(element,binding){
          //输出指定元素的详细信息到控制台用于验证element是否是真实DOM元素
          console.dir(element);
          //检查传入的 element 是否是 HTMLElement 的实例
          console.log(element instanceof HTMLElement);
          element.innerText = binding.value * 10;
      }
    }
};
</script>
```

结果展示：

![](https://cdn.nlark.com/yuque/0/2024/gif/40965929/1715240625209-d300425a-6f45-478a-bf17-9bf3792c3ecd.gif#averageHue=%23f3f4fa&clientId=u7cb7d1e0-c595-4&from=paste&id=u6794bdd5&originHeight=122&originWidth=294&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=stroke&taskId=uf9990b58-38ec-45b3-b561-fa8cc0379c0&title=)

总结：

- 函数式写法是一种简洁的方式来定义自定义指令，它只包含一个函数，没有任何生命周期钩子。这种写法适合于不需要绑定值或者监听变化的简单指令。
- 上面示例中, big 函数在指令和元素绑定时就被调用，并且指令所在的模板被 vue.js 重新解析后也会再次被调用。

注意：所有自定义指令中的 this 都是 windows